<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  </head>
  <body>
    <div class="header container-fluid">
      <div class="row">

        	<ul class="nav col">
        		<li class="hor_item"><a href="#">Home</a></li>
        		<li class="hor_item"><a href="#">My BMW collection</a>
        			<ul class="hor_content">
        				<li class="ver_item"><a href="#">X3</a></li>
        				<li class="ver_item"><a href="#">x5</a></li>
        				<li class="ver_item"><a href="#">X6</a>
        					<ul class="ver_content">
        						<li class="ver_item"><a href="#">Black</a></li>
                    <li class="ver_item"><a href="#">White</a>
                      <ul class="ver_content">
                        <li class="ver_item"><a href="#">New</a></li>
                        <li class="ver_item"><a href="#">Old</a>
                          <ul class="ver_content">
                            <li class="ver_item"><a href="#">With Money</a></li>
                            <li class="ver_item"><a href="#">With New Wheels</a></li>
                          </ul>
                        </li>
                      </ul>
                    </li>
        					</ul>
        				</li>
        			</ul>
        		</li>
        		<li class="hor_item"><a href="#">My Money</a>
        			<ul class="hor_content">
        				<li class="ver_item"><a href="#">$</a></li>
        				<li class="ver_item"><a href="#">Rub</a></li>
        			</ul>
        		</li>
        	</ul>
        </div>
    </div>

      <div class="gallery container-fluid">
        <div class="row gallery_container justify-content-between">


          <div class="gallery_control-left col-1">
            <div class="gallery_control-image">
              L
            </div>
          </div>

          <div class="gallery_slide image_3"></div>
          <div class="gallery_slide image_2"></div>
          <div class="gallery_slide image_1"></div>

          <div class="gallery_control-right col-1">
            <div class="gallery_control-image">
              R
            </div>
          </div>

        </div>
      </div>

      <script type="text/javascript">
        $(window).on('load', function(){
          var root = $(".gallery")[0];
          var lControl = $(root).find('.gallery_control-left > .gallery_control-image')[0];
          var rControl = $(root).find('.gallery_control-right > .gallery_control-image')[0];
          var slides = $(root).find('.gallery_slide');
          var slidesCount = slides.length;
          var slideIndex = slidesCount-1;
          var canPress = true;
          slides[slidesCount-1].classList.add('gallery_slide__selected');

          rControl.onclick = function(event) {
            moveSlide('right');
          }

          lControl.onclick = function(event){
            moveSlide('left');
          }

          function moveSlide(direction) {
            if(!canPress) return;

            canPress = false;
            if(direction === 'left'){
              slides[slideIndex].classList.remove('gallery_slide__right-to-left');
              slides[slideIndex].classList.remove('gallery_slide__to-left');
              slides[slideIndex].classList.remove('gallery_slide__selected');
              slides[slideIndex].classList.remove('gallery_slide__left-to-right');
              slides[slideIndex].classList.add('gallery_slide__to-right');
              if(slideIndex >= slidesCount - 1)
                slideIndex = 0;
              else
                slideIndex++;
              slides[slideIndex].classList.remove('gallery_slide__right-to-left');
              slides[slideIndex].classList.remove('gallery_slide__to-left');
              slides[slideIndex].classList.remove('gallery_slide__to-right');
              slides[slideIndex].classList.add('gallery_slide__left-to-right');
              slides[slideIndex].classList.add('gallery_slide__selected');

              slides[slideIndex].addEventListener('animationend', function(){
                canPress = true;
             });
            }
            else if(direction === 'right') {
              slides[slideIndex].classList.remove('gallery_slide__left-to-right');
              slides[slideIndex].classList.remove('gallery_slide__to-right');
              slides[slideIndex].classList.remove('gallery_slide__selected');
              slides[slideIndex].classList.remove('gallery_slide__right-to-left');
              slides[slideIndex].classList.add('gallery_slide__to-left');
              if(slideIndex <= 0)
                slideIndex = slidesCount - 1;
              else
                slideIndex--;
              slides[slideIndex].classList.remove('gallery_slide__left-to-right');
              slides[slideIndex].classList.remove('gallery_slide__to-right');
              slides[slideIndex].classList.remove('gallery_slide__to-left');
              slides[slideIndex].classList.add('gallery_slide__right-to-left');
              slides[slideIndex].classList.add('gallery_slide__selected');

              slides[slideIndex].addEventListener('animationend', function(){
                canPress = true;
             });
           }

          }
          setInterval(function() {

            moveSlide('right');
          }, 2000);
        });
      </script>


</body>
</html>
